<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>TirAssist ‚Äî –ü–∞—Ä–∫–æ–≤–∫–∏</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div id="map"></div>

  <!-- Top Bar -->
  <div id="top-bar">
    <div id="search-wrapper">
      <span class="search-icon">üîç</span>
      <input type="text" id="search-input" placeholder="–ì–æ—Ä–æ–¥ –∏–ª–∏ –∞–¥—Ä–µ—Å..." autocomplete="off">
      <button id="search-clear" class="hidden">‚úï</button>
    </div>
    <div id="top-actions">
      <button id="layer-btn" class="action-btn" title="–°–ø—É—Ç–Ω–∏–∫">üõ∞Ô∏è</button>
      <button id="route-btn" class="action-btn" title="–ú–∞—Ä—à—Ä—É—Ç">üó∫Ô∏è</button>
      <button id="filter-btn" class="action-btn" title="–§–∏–ª—å—Ç—Ä—ã">‚öôÔ∏è</button>
      <button id="locate-btn" class="action-btn" title="–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ">üìç</button>
    </div>
  </div>

  <!-- Search Results -->
  <div id="search-results"></div>

  <!-- Filter Panel -->
  <div id="filter-panel" class="floating-panel hidden">
    <div class="panel-title">–§–∏–ª—å—Ç—Ä—ã</div>
    <div class="filter-chips">
      <button class="chip" data-filter="free">üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω–æ</button>
      <button class="chip" data-filter="shower">üöø –î—É—à</button>
      <button class="chip" data-filter="toilet">üöΩ –¢—É–∞–ª–µ—Ç</button>
      <button class="chip" data-filter="security">üîí –û—Ö—Ä–∞–Ω–∞</button>
      <button class="chip" data-filter="restaurant">‚òï –†–µ—Å—Ç–æ—Ä–∞–Ω</button>
      <button class="chip" data-filter="electricity">‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ</button>
    </div>
    <button id="filter-clear" class="secondary-btn">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ</button>
  </div>

  <!-- Route Panel -->
  <div id="route-panel" class="floating-panel hidden">
    <div class="panel-title">–ú–∞—Ä—à—Ä—É—Ç</div>
    <div class="route-inputs">
      <div class="route-input-row">
        <span class="route-dot green"></span>
        <input type="text" id="route-from" placeholder="–û—Ç–∫—É–¥–∞" autocomplete="off">
      </div>
      <div class="route-divider"></div>
      <div class="route-input-row">
        <span class="route-dot red"></span>
        <input type="text" id="route-to" placeholder="–ö—É–¥–∞" autocomplete="off">
      </div>
    </div>
    <button id="route-go-btn" class="primary-btn">–ù–∞–π—Ç–∏ –ø–∞—Ä–∫–æ–≤–∫–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ</button>
    <button id="route-clear-btn" class="secondary-btn hidden">–û—á–∏—Å—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</button>
  </div>

  <!-- Add Parking FAB -->
  <button id="add-parking-btn" title="–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∫–æ–≤–∫—É">Ôºã</button>

  <!-- Add Parking Modal -->
  <div id="add-modal" class="hidden">
    <div id="add-modal-overlay" onclick="app.closeAddModal()"></div>
    <div id="add-modal-content">
      <div id="add-modal-header">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∫–æ–≤–∫—É</h3>
        <button id="add-modal-close" onclick="app.closeAddModal()">‚úï</button>
      </div>
      <div id="add-modal-body">
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="add-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Truck Stop A4">
        </div>
        <div class="form-group">
          <label>–ê–¥—Ä–µ—Å</label>
          <input type="text" id="add-address" placeholder="–£–ª–∏—Ü–∞, –≥–æ—Ä–æ–¥, —Å—Ç—Ä–∞–Ω–∞">
        </div>
        <div class="form-group">
          <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç –¥–ª—è TIR</label>
          <input type="number" id="add-spots" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 50" min="1" max="9999">
        </div>
        <div class="form-group">
          <label>–°–µ—Ä–≤–∏—Å—ã</label>
          <div class="services-grid">
            <label class="service-check"><input type="checkbox" value="shower"> üöø –î—É—à</label>
            <label class="service-check"><input type="checkbox" value="toilet"> üöΩ –¢—É–∞–ª–µ—Ç</label>
            <label class="service-check"><input type="checkbox" value="security"> üîí –û—Ö—Ä–∞–Ω–∞</label>
            <label class="service-check"><input type="checkbox" value="restaurant"> ‚òï –†–µ—Å—Ç–æ—Ä–∞–Ω</label>
            <label class="service-check"><input type="checkbox" value="electricity"> ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ</label>
          </div>
        </div>
        <div class="form-group">
          <label>–°—Ç–æ–∏–º–æ—Å—Ç—å</label>
          <div class="toggle-row">
            <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            <label class="toggle-switch">
              <input type="checkbox" id="add-paid">
              <span class="toggle-slider"></span>
            </label>
            <span>–ü–ª–∞—Ç–Ω–æ</span>
          </div>
        </div>
        <div class="form-group">
          <label>üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</label>
          <input type="text" id="add-coords" placeholder="–ù–∞–ø—Ä: 52.2156, 20.7834" inputmode="decimal">
          <button id="add-use-location-btn" class="secondary-btn" style="margin-top:8px">
            üìç –í—Å—Ç–∞–≤–∏—Ç—å –º–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
          </button>
          <button id="add-use-center-btn" class="secondary-btn" style="margin-top:6px">
            üó∫Ô∏è –í—Å—Ç–∞–≤–∏—Ç—å —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã
          </button>
        </div>
        <button id="add-submit-btn" class="primary-btn" style="margin-top:8px">
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom Sheet -->
  <div id="bottom-sheet" class="hidden">
    <div id="sheet-drag-handle" onclick="app.hidePanel()">
      <div id="sheet-handle"></div>
    </div>
    <div id="sheet-content">
      <div id="sheet-header">
        <h2 id="parking-name"></h2>
        <span id="parking-distance" class="distance-badge hidden"></span>
      </div>
      <p id="parking-address"></p>
      <div id="parking-meta">
        <span id="parking-spots"></span>
        <span id="parking-rating"></span>
      </div>
      <div id="services-row"></div>
      <button id="maps-btn" class="primary-btn maps-btn">
        üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –≤ Google Maps
      </button>
    </div>
  </div>

  <!-- JS Libraries -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="https://unpkg.com/@tmcw/togeojson@5.8.1/dist/togeojson.umd.js"></script>
  <script src="app.js"></script>
</body>
</html>
