<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>TirAssist ‚Äî –ü–∞—Ä–∫–æ–≤–∫–∏</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
  <link rel="stylesheet" href="style.css?v=6">
</head>
<body>

  <div id="map"></div>

  <!-- Top Bar -->
  <div id="top-bar">
    <div id="route-inline">
      <div class="route-inline-row">
        <span class="route-dot green"></span>
        <input type="text" id="route-from" placeholder="–û—Ç–∫—É–¥–∞" autocomplete="off">
      </div>
      <div class="route-inline-divider"></div>
      <div class="route-inline-row">
        <span class="route-dot red"></span>
        <input type="text" id="route-to" placeholder="–ö—É–¥–∞" autocomplete="off">
        <button id="route-go-btn" class="route-go-btn" title="–ù–∞–π—Ç–∏ –ø–∞—Ä–∫–æ–≤–∫–∏">‚Üí</button>
      </div>
      <button id="route-clear-btn" class="route-clear-btn hidden">‚úï –û—á–∏—Å—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</button>
    </div>
    <div id="top-actions">
      <button id="layer-btn" class="action-btn" title="–°–ø—É—Ç–Ω–∏–∫">üõ∞Ô∏è</button>
      <button id="filter-btn" class="action-btn" title="–§–∏–ª—å—Ç—Ä—ã">‚öôÔ∏è</button>
      <button id="locate-btn" class="action-btn" title="–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ">üìç</button>
    </div>
  </div>

  <!-- Filter Panel -->
  <div id="filter-panel" class="floating-panel hidden">
    <div class="panel-title">–§–∏–ª—å—Ç—Ä—ã</div>
    <div class="filter-chips">
      <button class="chip" data-filter="free">üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω–æ</button>
      <button class="chip" data-filter="shower">üöø –î—É—à</button>
      <button class="chip" data-filter="toilet">üöΩ –¢—É–∞–ª–µ—Ç</button>
      <button class="chip" data-filter="security">üîí –û—Ö—Ä–∞–Ω–∞</button>
      <button class="chip" data-filter="restaurant">‚òï –†–µ—Å—Ç–æ—Ä–∞–Ω</button>
      <button class="chip" data-filter="electricity">‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ</button>
    </div>
    <button id="filter-clear" class="secondary-btn">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ</button>
  </div>

  <!-- Add Parking FAB -->
  <button id="add-parking-btn" title="–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∫–æ–≤–∫—É">Ôºã</button>

  <!-- Add Parking Modal -->
  <div id="add-modal" class="hidden">
    <div id="add-modal-overlay" onclick="app.closeAddModal()"></div>
    <div id="add-modal-content">
      <div id="add-modal-header">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∫–æ–≤–∫—É</h3>
        <button id="add-modal-close" onclick="app.closeAddModal()">‚úï</button>
      </div>
      <div id="add-modal-body">
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="add-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Truck Stop A4">
        </div>
        <div class="form-group">
          <label>–°–µ—Ä–≤–∏—Å—ã</label>
          <div class="services-grid">
            <label class="service-check"><input type="checkbox" value="shower"> üöø –î—É—à</label>
            <label class="service-check"><input type="checkbox" value="toilet"> üöΩ –¢—É–∞–ª–µ—Ç</label>
            <label class="service-check"><input type="checkbox" value="security"> üîí –û—Ö—Ä–∞–Ω–∞</label>
            <label class="service-check"><input type="checkbox" value="restaurant"> ‚òï –†–µ—Å—Ç–æ—Ä–∞–Ω</label>
            <label class="service-check"><input type="checkbox" value="electricity"> ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ</label>
          </div>
        </div>
        <div class="form-group">
          <label>–°—Ç–æ–∏–º–æ—Å—Ç—å</label>
          <div class="toggle-row">
            <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            <label class="toggle-switch">
              <input type="checkbox" id="add-paid">
              <span class="toggle-slider"></span>
            </label>
            <span>–ü–ª–∞—Ç–Ω–æ</span>
          </div>
        </div>
        <div class="form-group">
          <label>üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</label>
          <input type="text" id="add-coords" placeholder="–ù–∞–ø—Ä: 52.2156, 20.7834" autocomplete="off">
          <button id="add-use-location-btn" class="secondary-btn" style="margin-top:8px">
            üìç –í—Å—Ç–∞–≤–∏—Ç—å –º–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
          </button>
        </div>
        <button id="add-submit-btn" class="primary-btn" style="margin-top:8px">
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom Sheet -->
  <div id="bottom-sheet" class="hidden">
    <div id="sheet-drag-handle" onclick="app.hidePanel()">
      <div id="sheet-handle"></div>
    </div>
    <div id="sheet-content">
      <div id="sheet-header">
        <h2 id="parking-name"></h2>
        <span id="parking-distance" class="distance-badge hidden"></span>
      </div>
      <div id="parking-coords-row" class="hidden">
        <span id="parking-coords"></span>
        <button id="parking-coords-copy" class="copy-btn" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã">üìã</button>
      </div>
      <div id="parking-meta">
        <span id="parking-rating"></span>
      </div>
      <div id="services-row"></div>
      <button id="maps-btn" class="primary-btn maps-btn">
        üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –≤ Google Maps
      </button>
    </div>
  </div>

  <!-- JS Libraries -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="https://unpkg.com/@tmcw/togeojson@5.8.1/dist/togeojson.umd.js"></script>
  <script src="app.js?v=6"></script>
</body>
</html>
